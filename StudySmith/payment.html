<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Payment Information | StudySmith</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root {
  --navy: #001F54;
  --gold: #FFD700;
  --gray: #6B7280;
  --light: #F8FAFC;
  font-family: Inter, system-ui, sans-serif;
}

body { margin: 0; background: var(--light); color: #0b1220; line-height: 1.5; }

.box {
  max-width: 600px; /* Slimmer look for payment */
  margin: 60px auto;
  background: #fff;
  padding: 40px;
  border-radius: 14px;
  box-shadow: 0 10px 25px rgba(0,31,84,.08);
}

h1, h2 { color: var(--navy); margin-bottom: 15px; }

/* Order Summary Styling */
.summary {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 25px;
}
.summary p { margin: 6px 0; }

/* PAYMENT CARD STYLING */
.payment-group {
  display: flex;
  flex-direction: column;
  gap: 10px; /* This removes the large vertical gaps */
  margin-bottom: 20px;
}

.payment-card {
  display: flex;
  align-items: center;
  padding: 14px 18px;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: #fff;
  margin-top: 0 !important; /* Overriding previous label styles */
}

.payment-card:hover {
  border-color: var(--navy);
  background-color: #fcfcfc;
}

/* Highlight the card when the checkbox inside is checked */
.payment-card:has(input:checked) {
  border-color: var(--navy);
  background-color: #f0f7ff;
  box-shadow: 0 4px 12px rgba(0, 31, 84, 0.08);
}

.method-logo {
  width: 35px;
  height: 35px;
  object-fit: contain;
  margin-right: 15px;
}

.method-name {
  font-weight: 600;
  color: var(--navy);
  flex-grow: 1;
}

.pay-input {
  width: 18px;
  height: 18px;
  accent-color: var(--navy);
}

/* Terms and Conditions Section */
.terms-row {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-top: 20px;
  font-size: 14px;
  cursor: pointer;
}

/* Button Styling */
button {
  width: 100%; /* Full width button looks better on mobile */
  margin-top: 25px;
  background: var(--navy);
  color: var(--gold);
  padding: 16px 24px;
  border: none;
  border-radius: 50px;
  font-weight: 800;
  cursor: pointer;
  transition: 0.2s;
  font-size: 16px;
}

button:hover { transform: translateY(-2px); opacity: 0.9; }

/* QR Section */
.qr-section {
  display: none;
  text-align: center;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px dashed #cbd5e1;
}

.qr-section img {
  max-width: 240px;
  border: 1px solid #e5e7eb;
  padding: 12px;
  border-radius: 12px;
  background: #fff;
}

.whatsapp-btn {
  display: none;
  margin-top: 15px;
  background: #25D366;
  color: #fff;
}

footer {
  background: var(--navy);
  color: #cbd5e1;
  text-align: center;
  padding: 30px 20px;
  margin-top: 60px;
}

footer a { color: var(--gold); text-decoration: none; }
</style>
</head>

<body>

<div class="box">
  <h1>Payment Information</h1>

  <h2>Order Summary</h2>
  <div class="summary" id="orderSummary"></div>

  <h2>Select Payment Method</h2>
  <form id="paymentForm">
    <div class="payment-group">
      
      <label class="payment-card">
        <img src="https://cdn-icons-png.flaticon.com/512/2830/2830284.png" class="method-logo" alt="Bank">
        <span class="method-name">Bank Transfer</span>
        <input type="checkbox" class="pay pay-input" value="bank">
      </label>

      <label class="payment-card">
        <img src="Images/jazzcash.jpg" class="method-logo" alt="JazzCash">
        <span class="method-name">JazzCash</span>
        <input type="checkbox" class="pay pay-input" value="jazzcash">
      </label>

      <label class="payment-card">
        <img src="Images/easypaisa.jpg" class="method-logo" alt="EasyPaisa">
        <span class="method-name">EasyPaisa</span>
        <input type="checkbox" class="pay pay-input" value="easypaisa">
      </label>

    </div>

    <label class="terms-row">
      <input type="checkbox" id="agreeTerms">
      <span>I agree to the <a href="terms.html" target="_blank">Terms & Conditions</a> and <a href="privacy.html" target="_blank">Privacy Policy</a></span>
    </label>

    <button type="submit">Show Payment QR</button>
  </form>

  <div class="qr-section" id="qrSection">
    <h2>Scan to Pay</h2>
    <p id="qrText" style="color:var(--gray); font-size: 14px; margin-bottom: 15px;"></p>
    <img id="qrImage" alt="Payment QR">
    <br>
    <button class="whatsapp-btn" id="whatsappBtn">Submit Payment Proof</button>
  </div>
</div>

<footer>
  <p>© 2025 StudySmith — Crafting Student Success</p>
  <p><a href="index.html">Back to Home</a></p>
</footer>

<script>
// ==== LOAD ORDER DATA ====
const orderID = localStorage.getItem('orderID');
const totalPrice = localStorage.getItem('total_price') || "0";
const orderStatus = localStorage.getItem('orderStatus') || "Pending Payment";

const orderDiv = document.getElementById('orderSummary');
if(!orderID){
  orderDiv.innerHTML = "<p style='color:red'>No order found. Please submit a request first.</p>";
} else {
  orderDiv.innerHTML = `
    <p><strong>Order ID:</strong> ${orderID}</p>
    <p><strong>Status:</strong> ${orderStatus}</p>
    <p><strong>Total Amount:</strong> ${totalPrice} PKR</p>
  `;
}

// ==== PAYMENT METHODS DATA ====
const qrCodes = {
  bank: { img: "Images/bank-qr.png", text: "Bank Transfer - Scan QR to pay via your bank app" },
  jazzcash: { img: "Images/jazzcash-qr.png", text: "JazzCash - Scan QR to pay via JazzCash app" },
  easypaisa: { img: "Images/easypaisa-qr.png", text: "EasyPaisa - Scan QR to pay via EasyPaisa app" }
};

// SINGLE SELECT CHECKBOX LOGIC
const boxes = document.querySelectorAll('.pay');
boxes.forEach(b => {
  b.addEventListener('change', () => {
    if(b.checked){
      boxes.forEach(x => x !== b && (x.checked = false));
    }
  });
});

// ==== FORM SUBMISSION ====
const paymentForm = document.getElementById('paymentForm');
const qrSection = document.getElementById('qrSection');
const qrImage = document.getElementById('qrImage');
const qrText = document.getElementById('qrText');
const whatsappBtn = document.getElementById('whatsappBtn');
const agreeTerms = document.getElementById('agreeTerms');

paymentForm.addEventListener('submit', e => {
  e.preventDefault();
  const selected = document.querySelector('.pay:checked');
  
  if(!selected){
    alert("Please select a payment method");
    return;
  }
  if(!agreeTerms.checked){
    alert("You must agree to Terms & Conditions");
    return;
  }

  const method = qrCodes[selected.value];
  qrImage.src = method.img;
  qrText.textContent = method.text;
  qrSection.style.display = 'block';
  whatsappBtn.style.display = 'inline-block';
  qrSection.scrollIntoView({ behavior: 'smooth' });
});

// ==== WHATSAPP REDIRECT ====
whatsappBtn.addEventListener('click', () => {
  const msg = `Hello StudySmith,
I have completed my payment.

Order ID: ${orderID}
Total Paid: ${totalPrice} PKR

Please find the payment screenshot attached.`;

  window.open(
    "https://wa.me/923264213612?text=" + encodeURIComponent(msg),
    "_blank"
  );
});
</script>

</body>
</html>
