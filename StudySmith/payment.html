<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Payment Information | StudySmith</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --navy:#001F54; --gold:#FFD700; --gray:#6B7280; --light:#F8FAFC;
  font-family:Inter,system-ui,sans-serif;
}
body{margin:0;background:var(--light);color:#0b1220}
.box{
  max-width:720px;margin:60px auto;background:#fff;
  padding:40px;border-radius:14px;
  box-shadow:0 10px 25px rgba(0,31,84,.08);
}
h1,h2{color:var(--navy)}
.summary{
  background:#f9fafb;border:1px solid #e5e7eb;
  padding:20px;border-radius:12px;margin-top:20px;
}
.summary p{margin:6px 0}
label{display:block;margin-top:18px;cursor:pointer}
button{
  margin-top:25px;background:var(--navy);color:var(--gold);
  padding:14px 24px;border:none;border-radius:50px;
  font-weight:800;cursor:pointer;transition:0.2s;
}
button:hover{transform:translateY(-2px)}
.qr-section{
  display:none;text-align:center;margin-top:30px;
}
.qr-section img{
  max-width:240px;border:1px solid #e5e7eb;
  padding:12px;border-radius:12px;
}
.whatsapp-btn{
  display:none;margin-top:15px;background:#25D366;color:#fff;
  padding:12px 20px;border:none;border-radius:50px;font-weight:700;cursor:pointer;
}
footer{
  background:var(--navy);color:#cbd5e1;
  text-align:center;padding:30px 20px;
}
footer a{color:var(--gold)}
</style>
</head>

<body>

<div class="box">
<h1>Payment Information</h1>

<h2>Order Summary</h2>
<div class="summary" id="orderSummary"></div>

<h2>Select Payment Method</h2>
<form id="paymentForm">
  <label><input type="checkbox" class="pay" value="bank"> Bank Transfer</label>
  <label><input type="checkbox" class="pay" value="jazzcash"> JazzCash</label>
  <label><input type="checkbox" class="pay" value="easypaisa"> EasyPaisa</label>

<label>
  <input type="checkbox" id="agreeTerms">
  I agree to the <a href="terms.html" target="_blank">Terms & Conditions</a> and <a href="privacy.html" target="_blank">Privacy Policy</a>
</label>


  <button type="submit">Show Payment QR</button>
</form>

<div class="qr-section" id="qrSection">
  <h2>Scan to Pay</h2>
  <p id="qrText" style="color:var(--gray)"></p>
  <img id="qrImage" alt="Payment QR">
  <br>
  <button class="whatsapp-btn" id="whatsappBtn">Submit Payment Proof</button>
</div>

</div>

<footer>
<p>© 2025 StudySmith — Crafting Student Success</p>
<p><a href="index.html">Back to Home</a></p>
</footer>

<script>
// ==== LOAD ORDER DATA ====
const orderID = localStorage.getItem('orderID');
const totalPrice = localStorage.getItem('total_price') || "0";
const orderStatus = localStorage.getItem('orderStatus') || "Pending Payment";

const orderDiv = document.getElementById('orderSummary');
if(!orderID){
  orderDiv.innerHTML = "<p style='color:red'>No order found. Please submit a request first.</p>";
} else {
  orderDiv.innerHTML = `
    <p><strong>Order ID:</strong> ${orderID}</p>
    <p><strong>Status:</strong> ${orderStatus}</p>
    <p><strong>Total Amount:</strong> ${totalPrice} PKR</p>
  `;
}

// ==== PAYMENT METHODS ====
const qrCodes = {
  bank:{img:"Images/bank-qr.png",text:"Bank Transfer - Scan QR to pay via your bank app"},
  jazzcash:{img:"Images/jazzcash-qr.png",text:"JazzCash - Scan QR to pay via JazzCash app"},
  easypaisa:{img:"Images/easypaisa-qr.png",text:"EasyPaisa - Scan QR to pay via EasyPaisa app"}
};

// SINGLE SELECT CHECKBOXES
const boxes = document.querySelectorAll('.pay');
boxes.forEach(b => {
  b.addEventListener('change', ()=> {
    if(b.checked){
      boxes.forEach(x => x!==b && (x.checked=false));
    }
  });
});

// ==== SHOW QR ====
const paymentForm = document.getElementById('paymentForm');
const qrSection = document.getElementById('qrSection');
const qrImage = document.getElementById('qrImage');
const qrText = document.getElementById('qrText');
const whatsappBtn = document.getElementById('whatsappBtn');
const agreeTerms = document.getElementById('agreeTerms');

paymentForm.addEventListener('submit', e=>{
  e.preventDefault();
  const selected = document.querySelector('.pay:checked');
  if(!selected){
    alert("Please select a payment method");
    return;
  }
  if(!agreeTerms.checked){
    alert("You must agree to Terms & Conditions");
    return;
  }

  const method = qrCodes[selected.value];
  qrImage.src = method.img;
  qrText.textContent = method.text;
  qrSection.style.display = 'block';
  whatsappBtn.style.display = 'inline-block';
  qrSection.scrollIntoView({behavior:'smooth'});
});

// ==== WHATSAPP BUTTON ====
whatsappBtn.addEventListener('click', ()=>{
  const msg = `Hello StudySmith,
I have completed my payment.

Order ID: ${orderID}
Total Paid: ${totalPrice} PKR

Please find the payment screenshot attached.`;

  window.open(
    "https://wa.me/923264213612?text=" + encodeURIComponent(msg),
    "_blank"
  );
});
</script>

</body>
</html>
